from config import SYMBOL, INTERVAL
import random

def check_long_signal():
    # ì˜ˆì‹œ ì¡°ê±´ (ëœë¤, ì‹¤ì œ ë¡œì§ ëŒ€ì²´)
    conditions_met = random.sample([
        "RSI < 40",
        "ë³¼ë¦°ì €ë°´ë“œ í•˜ë‹¨ ì ‘ê·¼",
        "EMA20 ì§€ì§€",
        "ë‹¤ì¤‘ ì§€ì§€ì„  ì ‘ê·¼",
        "ì¶”ì„¸ ë‘”í™” ìº”ë“¤"
    ], k=3)  # ìµœì†Œ 2ê°œ ë§Œì¡±ì´ë¼ ê°€ì •

    condition_count = len(conditions_met)
    price = 61000  # ì˜ˆì‹œ ì§„ì…ê°€
    stop_loss = price * 0.95
    take_profit = price * 1.10

    leverage = {2: "2x", 3: "3x", 4: "5x", 5: "5x"}.get(condition_count, "2x")

    levels = {
        "5m": {"ì§€ì§€ì„ ": "60,800", "ì €í•­ì„ ": "61,400", "ì±„ë„": "60,700 ~ 61,500"},
        "15m": {"ì§€ì§€ì„ ": "60,500", "ì €í•­ì„ ": "61,800", "ì±„ë„": "60,400 ~ 61,900"},
        "30m": {"ì§€ì§€ì„ ": "60,000", "ì €í•­ì„ ": "62,000", "ì±„ë„": "59,900 ~ 62,100"},
        "1h": {"ì§€ì§€ì„ ": "59,800", "ì €í•­ì„ ": "62,500", "ì±„ë„": "59,600 ~ 62,600"},
        "4h": {"ì§€ì§€ì„ ": "59,000", "ì €í•­ì„ ": "63,000", "ì±„ë„": "58,800 ~ 63,200"},
        "1d": {"ì§€ì§€ì„ ": "57,000", "ì €í•­ì„ ": "65,000", "ì±„ë„": "56,500 ~ 65,500"},
    }

    nasdaq_info = "ë‚˜ìŠ¤ë‹¥ ì§€ìˆ˜ RSI 45, 15ë¶„ë´‰ ì €í•­ ì ‘ê·¼ ì¤‘, ì¶”ì„¸ ì•½ì„¸"
    news_summary = "ğŸ“‰ Fed ê¸ˆë¦¬ ë™ê²° ì‹œì‚¬, ğŸ“ˆ BTC ETF ìê¸ˆ ìˆœìœ ì… ì§€ì†, ğŸŒ ë°”ì´ë‚¸ìŠ¤ ê·œì œ ë¶ˆí™•ì‹¤ì„±"

    message = f"""ğŸ“¢ <b>[ì˜ë¹ˆ ì„ ë¬¼ì „ëµ v1.2]</b>

ğŸŸ¢ <b>ë¡± ì§„ì… ì‹ í˜¸ ë°œìƒ</b>
ì¡°ê±´ ë§Œì¡± ìˆ˜: {condition_count}ê°œ â†’ <b>{', '.join(conditions_met)}</b>

ğŸ“ <b>ì§„ì…ê°€:</b> {price:.2f} USDT
â›” <b>ì†ì ˆê°€:</b> {stop_loss:.2f} USDT
ğŸ¯ <b>ìµì ˆê°€:</b> {take_profit:.2f} USDT
ğŸ“Œ <b>ì¶”ì²œ ë ˆë²„ë¦¬ì§€:</b> {leverage}

ğŸ“Š <b>ë‹¤ì¤‘ ì§€ì§€/ì €í•­ì„ </b>
""" + "\n".join([
        f"â±ï¸ <b>{tf}</b> â†’ ì§€ì§€: {lv['ì§€ì§€ì„ ']} / ì €í•­: {lv['ì €í•­ì„ ']} / ì±„ë„: {lv['ì±„ë„']}"
        for tf, lv in levels.items()
    ]) + f"""

ğŸ“ˆ <b>ë‚˜ìŠ¤ë‹¥ ì¶”ì„¸ ìš”ì•½</b>: {nasdaq_info}

ğŸ“° <b>ê¸€ë¡œë²Œ ë‰´ìŠ¤ ìš”ì•½</b>: {news_summary}
"""

    return message
